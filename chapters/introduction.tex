\section{Einführung}\label{introduction}

\newcommand{\R}{\mathbb{R}}

\begin{definition}[strategisches Spiel]
	Ein \emph{strategisches Spiel} $\mathcal{G}$ ist ein Tupel $(P, X, \theta)$, wobei $P$ eine Menge von Spielern, $X$ die Menge der Strategien  und $\theta=(\theta_p)_{p_\in P}$ die Familie der Auszahlungsfunktionen der Spieler ist, wobei $\theta_p$ eine Funktion $X^P\to\R$ für jeden Spieler $p\in P$ ist.
\end{definition}

Man beachte, dass in dieser Definition eines strategischen Spiels die Spieler eine gemeinsame Strategiemenge haben.

\begin{definition}[statisches Flussnetzwerk]
	Ein \emph{statisches Flussnetzwerk} $\mathcal{N}:=(G,s,t,\mu)$ ist ein Graph $G:=(V,E)$ mit Knoten $V$ und Kanten $E$, einer \emph{Quelle} $s\in V$, einer \emph{Senke} $t\in V$ zusammen mit einem \emph{$d$-wertigen statischen Fluss} $\mu: \mathcal{P} \to \R$, wobei $\mathcal{P}$ die Menge aller einfachen $s$-$t$-Pfade in G ist und $d=\sum_{p\in\mathcal{P}}\mu(p)$ gilt.
\end{definition}

\begin{definition}[statisches Routenplanungsspiel]
	Sei ein Graph $G:=(V,E)$ mit Knoten $V$ und Kanten $E$, einer Quelle $s\in V$, einer Senke $t\in V$ und einem Zufluss $d\in\R_+$ gegeben.
	Ein \emph{statisches Routenplanungsspiel} ist ein strategisches Spiel mit  Spielermenge $[0,d]\subseteq\R$, wobei ein Spieler als \emph{Flusspartikel} bezeichnet wird, und mit Strategiemenge $\mathcal{P}$ aller $s$-$t$-Pfade in $G$.
	Die Auszahlungsfunktion $\theta_x$ gibt die Kosten des Partikels $x$ in Abhängigkeit des Flusses an.
	
	Der Fluss $\mu$ heißt Nashfluss, falls $l_P(\mu)=min_{P'\in\mathcal{P}}l_{P'}(\mu)$ für alle $P\in\mathcal{P}$ mit $\mu_P > 0$ gilt.
\end{definition}

\section{Dynamische Flüsse mit Zeithorizont}


Betrachte Zeitraum $[0,T]$ mit $T\in\R_+$.
$d$ Spieler erscheinen an Quelle $s$ über Zeitraum von $0$ bis $T$

\begin{definition}[Netzwerk]
	Ein \emph{Netzwerk} ist ein gerichteter Graph $G=(V,E)$ mit endlicher Knotenmenge $V$ und Kantenmenge $E\subseteq V\times V$, einer \emph{Quelle} $s\in V$ und einer Senke $t\in V$.
	Jeder Kante $e\in E$ werden eine Kapazität $u_e > 0$ und eine Verzögerungszeit $\tau_e\geq 0$ zugeordnet.
\end{definition}

Für ein Netzwerk $\mathcal{N}$ bezeichne $\mathcal{P}$ die Menge aller $s$-$t$-Pfade.

\begin{definition}[Fluss über Zeit]
	Ein Fluss über Zeit $f=(f^+, f^-)$ ist ein Paar zweier über die Kanten $E$ indizierten Familien von Lebesgue-integrierbaren Funktionen $f^+_e,f^-_e: \R \to \R_{\geq 0}$ an $e$ für alle $e\in E$.
	
	Dabei bezeichnen $f_e^+(\theta)$ die \emph{Einflussrate an $e$ zum Zeitpunkt $\theta\in\R$} und $f_e^-(\theta)$ die \emph{Ausflussrate aus $e$ zum Zeitpunkt $\theta\in\R$} für $e\in E$.
	
	Der (kumulative) \emph{Einfluss bzw. Ausfluss an einer Kante $e$ bis zum Zeitpunkt $\theta$} sei definiert durch $F^+_e(\theta):=\int_{[0,\theta)} f^+_e d\lambda$ bzw. $F^-_e(\theta):=\int_{[0,\theta)} f^-_e d\lambda$.
	
	Die \emph{(Länge der) Warteschlange an Kante $e$ zum Zeitpunkt $\theta\in\R$} sei definiert durch $z_e(\theta):= F_e^+(\theta) - F_e^-(\theta + \tau_e)$ und die \emph{Wartezeit an Kante $e$ zum Zeitpunkt $\theta\in\R$} sei definiert durch $q_e(\theta) = z_e / u_e$.
\end{definition}

\begin{definition}[Zulässiger Fluss über Zeit]
	Sei ein Fluss über Zeit $f=(f^+, f^-)$ gegeben. $f$ heißt zulässig, falls
	\begin{enumerate}[(I)]
		\item keine Ausflussrate die Kapazität übersteigt, d.h. $\forall e\in E, \theta\in\R: f_e^-\leq u_e$, und
		\item\label{weak} Fluss eine Kante nur verlässt, falls er die Kante zuvor betreten hat, d.h. $\forall e\in E, \theta\in\R: F_e^+(\theta) \geq F_e^-(\theta + \tau_e)$, und
		\item Fluss direkt nach der Ankunft an einem Knoten der nächsten Kante zugeordnet wird, d.h. $\forall v\in V\setminus \{ s, t \}, \theta\in\R: \sum_{e\in\delta^-(v)}f^-_e(\theta) = \sum_{e\in\delta^+(v)} f_e^+(\theta)$, und
		\item\label{queue-with-capacity} nicht-leere Warteschlangen mit der Kapazität der Kante abgebaut werden, d.h. $\forall e\in E, \theta\in\R: q_e(\theta) > 0 \implies f_e^-(\theta + \tau_e) = u_e$.
		\todo{
		 $F_e^+(\theta) = F_e^-(\theta + \tau_e + q_e(\theta))$ für alle $e\in E, \theta\in\R$, ist das das gleiche (f.ü.)?}
	\end{enumerate}
\end{definition}

\todo{source and sink nodes: Kein Fluss verschwindet bei Quelle, kein Fluss kommt hinzu bei Sinke}

\todo{FIFO Interpretation}

\begin{proposition}
	Sei $e\in E$ eine Kante und $f$ ein zulässiger Fluss. Dann gilt:
	\begin{enumerate}[(i)]
		\item\label{theta-plus-queue-mon-cont} Die Funktion $\theta \mapsto \theta + q_e(\theta)$ ist monoton wachsend und stetig.
		\item Für alle $\theta\in\R$ ist $F_e^+(\theta) = F_e^-(\theta+\tau_e+q_e(\theta))$.
		\item Für zwei Zeitpunkte $0\leq \theta_1 < \theta_2$ mit $\int_{\theta_1}^{\theta_2} f^+_e d\lambda = 0$ und $q_e(\theta_2)>0$ ist $\theta_1 + q_e(\theta_1) = \theta_2 + z_e(\theta_2)$.
	\end{enumerate}
\end{proposition}
\begin{proof}
	Für die Monotonie in~(\ref{theta-plus-queue-mon-cont}) seien $\theta_1 \leq \theta_2$ gegeben.
	Mit der Monotonie von $F_e^+$ und mit $F_e^-(\theta_1 + \tau_e) = F_e^-(\theta_2+\tau_e) - \int_{\theta_1+\tau}^{\theta_2+\tau} f_e^-(t)dt\leq F_e^-(\theta_2 + \tau_e) + (\theta_2 - \theta_1)u_e$ gilt: 
	$$
		\theta_1 + q_e(\theta_1)
		= \theta_1 + \frac{F_e^+(\theta_1) - F_e^-(\theta_1 + \tau_e)}{u_e}\\
		\leq \theta_2 + \frac{F_e^+(\theta_1) - F_e^-(\theta_2+\tau_e)}{u_e} \leq \theta_2 + q_e(\theta_2).
	$$
	Die Stetigkeit folgt aus der Stetigkeit von $F_e^+$ und $F_e^-$.
	
	Zu Aussage (ii): Nach Voraussetzung~(\ref{queue-with-capacity}) ist $\int_{\theta + \tau_e}^{\theta + \tau_e + q_e(\theta)} f_e^-(t) dt = \int_{\theta}^{\theta + q_e(\theta)}f_e^-(t + \tau_e) dt = q_e(\theta)  u_e = z_e(\theta)$ (\todo{für $\theta'$ ist $q_e(\theta')> 0$}). Damit ist $F_e^-(\theta + \tau_e + q_e(\theta)) = F_e^-(\theta+\tau_e) + \int_{\theta+\tau_e}^{\theta+\tau_e+q_e(\theta)}f_e^-(t)dt = F_e^+(\theta)$.
	
	Zu Aussage (iii): Für alle $\theta'\in [\theta_1, \theta_2]$ gilt $F_e^+(\theta_1) = F_e^+(\theta') = F_e^-(\theta_2)$.
	Also ist $F_e^+(\theta') - F_e^-(\theta' + \tau_e) \geq F_e^+(\theta_2)-F_e^-(\theta_2 + \tau_e) = z_e(\theta_2) > 0$ und es gilt $f_e^-(\theta' + \tau_e)=u_e$.
	Für die Warteschlangendifferenz gilt dann: 
	$z_e(\theta_1)-z_e(\theta_2)=-F^-(\theta_1 + \tau_e) + F^-(\theta_2 + \tau_e) = \int_{\theta_1 + \tau_e}^{\theta_2 + \tau_e} f^-_e(t) dt = (\theta_2 - \theta_1)u_e$.
	Man folgere $q_e(\theta_1) - q_e(\theta_2) = \theta_2 - \theta_1$.
\end{proof}

\todo{Stetigkeit von irgendwas um die "Wohldefiniertheit" dieser komischen Definition  von Nash flows zu zeigen}

\section{Charakterisierungen von Nash-Flüssen über Zeit}


